<!DOCTYPE html>
<html lang="es">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>Mis profesores</title>
    <link rel="stylesheet" href="header.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="Images html/logo pestaña.png" type="image/png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

</head>

<body>
    <header class="header">

        <img class="logoarriba" src="Images html/LOGOLH.png" alt="Learn Hub">
        <div class="search">
            <input type="search" name="Buscar" id="búsqueda" placeholder="Buscar">
            <button class="buttonsearch"><i class="fas fa-search"></i></button>
        </div>

        <nav class="navbar">
            <ul>
                <li class="boton-inicio"><button class="inicio" onclick="window.location.href='home.html'"><img
                            src="Images html/logo inicio.png" alt=""></button><a href="home.html">Inicio</a></li>
                <li class="boton-perfil-alumno"><button onclick="window.location.href='perfil.html'"><img
                            src="Images html/logo perfil alumno.png" alt=""></button><a href="perfil.html">Perfil</a>
                </li>
                <li class="boton-mis-profesores"><button onclick="window.location.href='misprofesores.html'"><img
                            src="Images html/logo mis profesores.png" alt=""></button><a href="misprofesores.html">Mis
                        profesores</a></li>
                <li class="boton-calendario"><button onclick="window.location.href='calendario.html'"><img
                            src="Images html/logo calendario.png" alt=""></button><a
                        href="calendario.html">Calendario</a></li>
                <li class="boton-configuracion"><button onclick="window.location.href='configuracion.html'"><img
                            src="Images html/logo configuracion.png" alt=""></button><a
                        href="configuracion.html">Configuración</a></li>
            </ul>
        </nav>
        <button id="menubutton"><img src="Images html/menubutton.png" alt="MENU"></button>
        <nav class="menu" id="menu">
            <ul>
                <li><a href="home.html">Inicio</a></li>
                <li><a href="perfil.html">Perfil</a></li>
                <li><a href="misprofesores.html">Mis profesores</a></li>
                <li><a href="calendario.html">Calendario</a></li>
                <li><a href="configuracion.html">Configuración</a></li>
            </ul>
        </nav>
    </header>
    <script src="script.js"></script>

    <main class="main-misprofesores">
        <aside class="aside-misprofesores">
            <div class="header-filtrar-profesores">
                <p>Filtrar</p>
                <img src="Images html/logo filtrar.png" alt="">
            </div>
            <div class="filtrar-profesores">
                <p>Nombre</p>
                <input type="search" placeholder="Buscar"><button id="filtrar-nombre" class="filtrar-button">Filtrar</button>
                <p>Materias</p>
                <input type="search" placeholder="Buscar"><button id="filtrar-materia" class="filtrar-button">Filtrar</button>
                <p>Fechas</p>
                <ul>
                    <li>Lunes</li>
                    <li>Martes</li>
                    <li>Miércoles</li>
                    <li>Jueves</li>
                    <li>Viernes</li>
                    <li>Sábado</li>
                    <li>Domingo</li>
                </ul>
                <button id="filtrar-fechas" class="filtrar-button">Filtrar</button>
            </div>
        </aside>
        <section id="lista-misprofesores" class="lista-misprofesores">


        </section>
        <aside class="aside-misprofesores">

        </aside>
    </main>
    <footer><img src="Images html/LogoLH.png" alt=""></footer>
</body>
<script>
    const mainCards = document.getElementById("lista-misprofesores");

    function CreateProfCard(prof) {
        return `
        <div class="profesor-misprofesores">
            <p class="name-profesor">${prof.nombre} ${prof.apellido}</p>
            <div class="content-profesor"><img class="fotomisprofesores" src="${prof.foto}" alt=" ">
                <div class="datos-profesor">
                    <div class="datacontainer">
                        <p class="bold">Materia:</p>
                        <p>${prof.materias}</p>
                    </div>
                    <div class="datacontainer">
                        <p class="bold">Días:</p>
                        <p>${prof.dias}</p>
                    </div>
                    <div class="datacontainer">
                        <p class="bold">Horarios:</p>
                        <p>${prof.disponibilidad_horaria}</p>
                    </div>
                </div>
                <div class="botones-profesor">
                    <button onclick="window.location.href='materialesdetrabajo.html'">Materiales de trabajo</button>
                    <button>Ir a perfil</button>
                    <button>Ver datos de contacto</button>
                </div>
                <div class="valoracion-profesor">
                    <p class="bold">Valoración</p>
                    <div class="stars" data-valoracion="${prof.valoracion}">
                        <img src="" alt="">
                        <img src="" alt="">
                        <img src="" alt="">
                        <img src="" alt="">
                        <img src="" alt="">
                    </div>
                </div>
            </div>
        </div>`;
    }

    document.addEventListener("DOMContentLoaded", async () => {
        if (!mainCards) {
            console.error("El elemento con id 'lista-misprofesores' no se encontró.");
            return;
        }

        // Obtener datos de los profesores
        const response = await fetch("https://learn-hub-eta.vercel.app/profesores");
        const data = await response.json();
        console.log(data);

        // Limpiar y renderizar las tarjetas de profesores
        mainCards.innerHTML = "";
        data.forEach((profesor) => {
            const item = CreateProfCard(profesor);
            mainCards.innerHTML += item;
        });

        // Array de rutas de imágenes según el estado (vacía, media, completa)
        const images = [
            'Images html/estrella vacia.png',   // 0
            'Images html/Media estrella.png',   // 1
            'Images html/estrella completa.png' // 2
        ];

        // Asignar las estrellas de valoración a cada tarjeta
        document.querySelectorAll('.stars').forEach(starContainer => {
            let valoracion = parseFloat(starContainer.getAttribute('data-valoracion'));

            // Redondear la valoración al número entero más cercano y dividir por 2
            valoracion = Math.round(valoracion / 2);

            const starImages = starContainer.querySelectorAll('img');

            // Asignar imágenes a las estrellas en función del valor redondeado
            starImages.forEach((img, index) => {
                if (valoracion >= index + 1) {
                    img.src = images[2]; // Estrella completa
                } else if (valoracion >= index + 0.5) {
                    img.src = images[1]; // Media estrella
                } else {
                    img.src = images[0]; // Estrella vacía
                }
            });
        });
    });
</script>

</html>