<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio</title>
    <link rel="stylesheet" href="header.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="shortcut icon" href="Images html/logo pestaña.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

</head>

<body>
    <header class="header">

        <img class="logoarriba" src="Images html/LOGOLH.png" alt="Learn Hub">
        <div class="search">
            <input type="search" name="Buscar" id="búsqueda" placeholder="Buscar">
            <button id="header-search" class="buttonsearch"><i class="fas fa-search"></i></button>
        </div>

        <nav class="navbar">
            <ul>
                <li class="boton-inicio"><button class="inicio" onclick="window.location.href='home.html'"><img
                            src="Images html/logo inicio.png" alt=""></button><a href="home.html">Inicio</a></li>
                <li class="boton-perfil-alumno"><button onclick="window.location.href='perfil.html'"><img
                            src="Images html/logo perfil alumno.png" alt=""></button><a href="perfil.html">Perfil</a>
                </li>
                <li class="boton-mis-profesores"><button onclick="window.location.href='misprofesores.html'"><img
                            src="Images html/logo mis profesores.png" alt=""></button><a href="misprofesores.html">Mis
                        profesores</a></li>
                <li class="boton-calendario"><button onclick="window.location.href='calendario.html'"><img
                            src="Images html/logo calendario.png" alt=""></button><a
                        href="calendario.html">Calendario</a></li>
                <li class="boton-configuracion"><button onclick="window.location.href='configuracion.html'"><img
                            src="Images html/logo configuracion.png" alt=""></button><a
                        href="configuracion.html">Configuración</a></li>
            </ul>
        </nav>
        <button id="menubutton"><img src="Images html/menubutton.png" alt="MENU"></button>
        <nav class="menu" id="menu">
            <ul>
                <li><a href="home.html">Inicio</a></li>
                <li><a href="perfil.html">Perfil</a></li>
                <li><a href="misprofesores.html">Mis profesores</a></li>
                <li><a href="calendario.html">Calendario</a></li>
                <li><a href="configuracion.html">Configuración</a></li>
            </ul>
        </nav>
    </header>
    <script src="script.js"></script>

    <main class="main-home">
        <aside class="aside-izq-home">
            <img src="Images html/icon perfil.png" alt="">
            <p class="big">Nombre y apellido</p>
            <p class="small">País</p>
        </aside>
        <article class="article-home">
            <div class="top-article-home">
                <p>Valora tu clase con </p>
                <p class="bold"> Nombre y apellido</p>
            </div>
            <div class="fotoyvaloracion-article-home"><img src="Images html/icon perfil.png" alt="">
                
                <div><p>Coso para valorar</p>
                <button class="enviar-valoracion">Enviar valoración</button></div>
                
            </div>
        </article>
        <aside class="aside-der-home">
            <div class="title-aside-der-home"><p class="bold">Calendario</p></div>
            <div>
                <p class="bold">Día</p>
                <p>Fecha y hora</p>
                <p>Clase con nombre y apellido</p>
            </div>

        </aside>
    </main>
    <script>
        window.onload = function() {
            const token = localStorage.getItem('token');
            if (!token) {
                // Si no hay token, redirige a la página de inicio de sesión
                window.location.href = 'inicio.html';
            } else {
                // Si hay token, carga los datos del alumno
                cargarDatosAlumno(token);
            }
        };
        
        function cargarDatosAlumno(token) {
            // Realiza una solicitud GET a la API con el token de autorización
            fetch('https://learn-hub-eta.vercel.app/alumnos', {
                method: 'GET',
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            })
            .then(response => response.json())
            .then(data => {
                // Muestra los datos del alumno si la solicitud fue exitosa
                mostrarDatosAlumno(data);
            })
            .catch(error => {
                console.error('Error al cargar los datos del alumno:', error);
            });
        }
        
        function mostrarDatosAlumno(data) {
            // Verifica que el array tenga al menos un elemento
            if (data.length > 0) {
                const alumno = data[0];  // Accede al primer alumno del array
                
                const nombreApellido = document.querySelector('.big');
                const fotoPerfil = document.querySelector('.aside-izq-home img');
                const pais = document.querySelector('.small');
        
                // Asegúrate de que los elementos existan antes de modificar su contenido
                if (nombreApellido && fotoPerfil && pais) {
                    nombreApellido.innerText = `${alumno.nombre} ${alumno.apellido}`;
                    fotoPerfil.src = alumno.foto || 'Images html/default-foto.png';  // Usa una foto por defecto si no hay foto
                    pais.innerText = alumno.pais;
                } else {
                    console.error('No se encontraron algunos de los elementos en el DOM');
                }
            } else {
                console.error('No se encontraron alumnos en la respuesta');
            }
        }
    </script>
    
</body>


</html>